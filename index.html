<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Analyse Rentabilit√© Transport </title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f3f4f6;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      min-height: 100vh;
      margin: 0;
    }
    .container {
      background: white;
      padding: 2rem;
      border-radius: 12px;
      box-shadow: 0 0 20px rgba(0,0,0,0.1);
      width: 100%;
      max-width: 600px;
    }
    select, input, button {
      width: 100%;
      padding: 0.75rem;
      margin-bottom: 1rem;
      border: 1px solid #ccc;
      border-radius: 8px;
    }
    button {
      background-color: #2563eb;
      color: white;
      font-weight: bold;
      border: none;
      cursor: pointer;
    }
    .result {
      margin-top: 1rem;
      padding: 1rem;
      border-radius: 8px;
      background-color: #f9fafb;
    }
    .go { color: green; font-weight: bold; }
    .nogo { color: red; font-weight: bold; }
  </style>
</head>
<body>
  <div class="container">
    <h2> Analyse de rentabilit√© V 1.2</h2>

    <form id="goNoGoForm">
      <label>‚õΩ Prix du gasoil (DH/L)</label>
      <input type="number" step="0.01" name="gasoilPrice" required min="0">

      <label>‚öñÔ∏è Poids total du produit (kg)</label>
      <input type="number" step="1" name="productWeight" required min="0">

      <label>üõí Prix d'achat du produit (DH)</label>
      <input type="number" step="0.01" name="purchasePrice" required min="0">

      <label>üí∏ Prix de vente du produit (DH)</label>
      <input type="number" step="0.01" name="sellingPrice" required min="0">

      <label>üõ£Ô∏è Frais d'autoroute (Aller seulement, en DH)</label>
      <input type="number" step="0.01" name="autoroutePrice" id="autoroutePrice" min="0" value="0">

      <label>üßæ Frais de d√©placement chauffeur (DH)</label>
      <input type="number" step="0.01" name="fraisDeplacement" id="fraisDeplacement" min="0" value="0">

      <label>üë®‚Äçüîß Frais journalier du chauffeur (DH)</label>
      <input type="number" step="0.01" name="fraisChauffeur" id="fraisChauffeur" min="0" value="0">

      <label>üöö Ville de d√©part</label>
      <select id="startLocation" required><option value="">Ville de d√©part</option></select>

      <label>üìç Ville d'arriv√©e</label>
      <select id="endLocation" required><option value="">Ville d'arriv√©e</option></select>

      <label>üõ£Ô∏è Distance aller (km)</label>
      <input type="number" id="distance" name="distance" step="0.1" readonly>

      <button type="submit">üìä Calculer</button>
    </form>

    <div id="result" class="result" style="display: none;"></div>
  </div>

  <script>
    const villesDepart = ["Berrechid", "Had Soualem", "Benahmed", "Bouskoura", "Marrakech", "Temara", "Sidi Ghanem"];
    const villesArrivee = [
      "Ain Harrouda", "Benahmed", "Ben Guerir", "Benslimane", "Berrechid", "Bouskoura", "Casablanca",
      "El Jadida", "Had Soualem", "Marrakech", "Mediouna", "Mohammedia", "Nouaceur", "Oued Zem", "Settat",
      "Sidi Bennour", "Sidi Rahal", "Sidi Smail", "Skhirat", "Soualem", "Temara", "Tit Mellil", "Youssoufia",
      "Casablanca", "Rabat", "Sal√©", "K√©nitra", "T√©mara", "Sidi Yahya El Gharb", "Sidi Slimane", "Sidi Taibi",
      "Tiflet", "Skhirat", "Ain Atiq", "Ain El Aouda", "Oulm√®s", "Rommani","Sidi kacem","Safi","Fes","B√©ni Mellal", "Khouribga", "Kh√©nifra", "Fquih Ben Salah", "Oued Zem", "Boujniba", "Boulanouare", "Bejaad", "Kasba Tadla", "Souk Sebt Oulad Nemma", "El Ksiba", "Zaouiat Cheikh",

    ];

    const distanceData = {
      "Had Soualem-Ain Harrouda": 40,
      "Had Soualem-Benahmed": 45,
      "Had Soualem-Ben Guerir": 165,
      "Had Soualem-Benslimane": 47,
      "Had Soualem-Bouskoura": 31,
      "Had Soualem-Casablanca": 40,
      "Had Soualem-El Jadida": 100,
      "Had Soualem-Marrakech": 255,
      "Had Soualem-Mediouna": 33,
      "Had Soualem-Mohammedia": 48,
      "Had Soualem-Nouaceur": 29,
      "Had Soualem-Oued Zem": 115,
      "Had Soualem-Settat": 37,
      "Had Soualem-Sidi Bennour": 110,
      "Had Soualem-Sidi Rahal": 45,
      "Had Soualem-Sidi Smail": 120,
      "Had Soualem-Skhirat": 105,
      "Had Soualem-Temara": 105,
      "Had Soualem-Tit Mellil": 39,
      "Had Soualem-Youssoufia": 160,
      "Had Soualem-Rabat": 93,
      "Had Soualem-Sal√©": 95,
      "Had Soualem-K√©nitra": 140,
      "Had Soualem-T√©mara": 105,
      "Had Soualem-Sidi Yahya El Gharb": 175,
      "Had Soualem-Sidi Slimane": 185,
      "Had Soualem-Sidi Taibi": 150,
      "Had Soualem-Tiflet": 170,
      "Had Soualem-Ain Atiq": 115,
      "Had Soualem-Ain El Aouda": 120,
      "Had Soualem-Oulm√®s": 225,
      "Had Soualem-Rommani": 155,
      "Had Soualem-Safi":225,
      "Had Soualem-Sidi Kacem":260,
       // Distances pour Benahmed
  "Benahmed-Ain Harrouda": 65,
  "Benahmed-Ben Guerir": 175,
  "Benahmed-Benslimane": 55,
  "Benahmed-Bouskoura": 45,
  "Benahmed-Casablanca": 75,
  "Benahmed-El Jadida": 105,
  "Benahmed-Marrakech": 275,
  "Benahmed-Mediouna": 55,
  "Benahmed-Mohammedia": 65,
  "Benahmed-Nouaceur": 47,
  "Benahmed-Oued Zem": 125,
  "Benahmed-Settat": 40,
  "Benahmed-Sidi Bennour": 120,
  "Benahmed-Sidi Rahal": 60,
  "Benahmed-Sidi Smail": 130,
  "Benahmed-Skhirat": 110,
  "Benahmed-Soualem": 47,
  "Benahmed-Temara": 115,
  "Benahmed-Tit Mellil": 60,
  "Benahmed-Youssoufia": 170,
  "Benahmed-Rabat": 125,
  "Benahmed-Sal√©": 130,
  "Benahmed-K√©nitra": 155,
  "Benahmed-T√©mara": 115,
  "Benahmed-Sidi Yahya El Gharb": 185,
  "Benahmed-Sidi Slimane": 195,
  "Benahmed-Sidi Taibi": 160,
  "Benahmed-Tiflet": 180,
  "Benahmed-Ain Atiq": 125,
  "Benahmed-Ain El Aouda": 135,
  "Benahmed-Oulm√®s": 240,
  "Benahmed-Rommani": 170,

  // Distances pour Bouskoura
  "Bouskoura-Ain Harrouda": 30,
  "Bouskoura-Ben Guerir": 160,
  "Bouskoura-Benslimane": 43,
  "Bouskoura-Casablanca": 27,
  "Bouskoura-El Jadida": 85,
  "Bouskoura-Marrakech": 240,
  "Bouskoura-Mediouna": 25,
  "Bouskoura-Mohammedia": 40,
  "Bouskoura-Nouaceur": 23,
  "Bouskoura-Oued Zem": 100,
  "Bouskoura-Settat": 35,
  "Bouskoura-Sidi Bennour": 100,
  "Bouskoura-Sidi Rahal": 50,
  "Bouskoura-Sidi Smail": 110,
  "Bouskoura-Skhirat": 85,
  "Bouskoura-Soualem": 30,
  "Bouskoura-Temara": 95,
  "Bouskoura-Tit Mellil": 33,
  "Bouskoura-Youssoufia": 145,
  "Bouskoura-Rabat": 100,
  "Bouskoura-Sal√©": 105,
  "Bouskoura-K√©nitra": 130,
  "Bouskoura-T√©mara": 95,
  "Bouskoura-Sidi Yahya El Gharb": 165,
  "Bouskoura-Sidi Slimane": 175,
  "Bouskoura-Sidi Taibi": 145,
  "Bouskoura-Tiflet": 160,
  "Bouskoura-Ain Atiq": 105,
  "Bouskoura-Ain El Aouda": 100,
  "Bouskoura-Oulm√®s": 205,
  "Bouskoura-Rommani": 140,
      // Distances pour Sidi Ghanem
"Sidi Ghanem-Ain Harrouda": 262,
"Sidi Ghanem-Ben Guerir": 80,
"Sidi Ghanem-Berrechid": 240,
"Sidi Ghanem-Bouskoura": 250,
"Sidi Ghanem-Casablanca": 250,
"Sidi Ghanem-El Jadida": 277,
"Sidi Ghanem-Had Soualem": 255,
"Sidi Ghanem-Marrakech": 10,
"Sidi Ghanem-Mediouna": 240,
"Sidi Ghanem-Mohammedia": 260,
"Sidi Ghanem-Nouaceur": 230,
"Sidi Ghanem-Oued Zem": 245,
"Sidi Ghanem-Settat": 210,
"Sidi Ghanem-Sidi Bennour": 210,
"Sidi Ghanem-Sidi Rahal": 270,
"Sidi Ghanem-Skhirat": 320,
"Sidi Ghanem-Soualem": 255,
"Sidi Ghanem-Temara": 310,
"Sidi Ghanem-Tit Mellil": 240,
"Sidi Ghanem-Youssoufia": 130,
"Sidi Ghanem-Rabat": 330,
"Sidi Ghanem-Sal√©": 340,
"Sidi Ghanem-K√©nitra": 380,
"Sidi Ghanem-Sidi Yahya El Gharb": 400,
"Sidi Ghanem-Sidi Slimane": 410,
"Sidi Ghanem-Sidi Taibi": 350,
"Sidi Ghanem-Tiflet": 380,
"Sidi Ghanem-Ain Atiq": 320,
"Sidi Ghanem-Ain El Aouda": 310,
"Sidi Ghanem-Oulm√®s": 290,
"Sidi Ghanem-Rommani": 300,
"Sidi Ghanem-Sidi kacem": 430,
"Sidi Ghanem-Safi": 160,
"Sidi Ghanem-Benahmed": 220,

  // Distances pour Marrakech
  "Marrakech-Ain Harrouda": 280,
  "Marrakech-Ben Guerir": 80,
  "Marrakech-Benslimane": 285,
  "Marrakech-Bouskoura": 240,
  "Marrakech-Casablanca": 250,
  "Marrakech-El Jadida": 195,
  "Marrakech-Mediouna": 235,
  "Marrakech-Mohammedia": 255,
  "Marrakech-Nouaceur": 230,
  "Marrakech-Oued Zem": 185,
  "Marrakech-Settat": 155,
  "Marrakech-Sidi Bennour": 205,
  "Marrakech-Sidi Rahal": 200,
  "Marrakech-Sidi Smail": 210,
  "Marrakech-Skhirat": 305,
  "Marrakech-Soualem": 240,
  "Marrakech-Temara": 315,
  "Marrakech-Tit Mellil": 250,
  "Marrakech-Youssoufia": 185,
  "Marrakech-Rabat": 325,
  "Marrakech-Sal√©": 330,
  "Marrakech-K√©nitra": 365,
  "Marrakech-T√©mara": 315,
  "Marrakech-Sidi Yahya El Gharb": 400,
  "Marrakech-Sidi Slimane": 410,
  "Marrakech-Sidi Taibi": 380,
  "Marrakech-Tiflet": 395,
  "Marrakech-Ain Atiq": 305,
  "Marrakech-Ain El Aouda": 300,
  "Marrakech-Oulm√®s": 355,
  "Marrakech-Rommani": 325,

  // Distances pour Temara (compl√©ments)
  "Temara-Ain Harrouda": 100,
  "Temara-Ben Guerir": 205,
  "Temara-Benslimane": 90,
  "Temara-Bouskoura": 95,
  "Temara-El Jadida": 140,
  "Temara-Mediouna": 90,
  "Temara-Mohammedia": 75,
  "Temara-Nouaceur": 80,
  "Temara-Oued Zem": 125,
  "Temara-Settat": 105,
  "Temara-Sidi Bennour": 145,
  "Temara-Sidi Rahal": 115,
  "Temara-Sidi Smail": 150,
  "Temara-Soualem": 95,
  "Temara-Tit Mellil": 100,
  "Temara-Youssoufia": 175,
  "Temara-Sal√©": 25,
  "Temara-Sidi Yahya El Gharb": 115,
  "Temara-Sidi Slimane": 125,
  "Temara-Sidi Taibi": 100,
  "Temara-Tiflet": 130,
  "Temara-Ain Atiq": 20,
  "Temara-Ain El Aouda": 30,
  "Temara-Oulm√®s": 155,
  "Temara-Rommani": 115,
  "Berrechid-Ain Harrouda": 45,
  "Berrechid-Benahmed": 35,
  "Berrechid-Ben Guerir": 155,
  "Berrechid-Benslimane": 50,
  "Berrechid-Bouskoura": 30,
  "Berrechid-Casablanca": 44,
  "Berrechid-El Jadida": 90,
  "Berrechid-Had Soualem": 33,
  "Berrechid-Marrakech": 245,
  "Berrechid-Mediouna": 35,
  "Berrechid-Mohammedia": 55,
  "Berrechid-Nouaceur": 32,
  "Berrechid-Oued Zem": 105,
  "Berrechid-Settat": 25,
  "Berrechid-Sidi Bennour": 105,
  "Berrechid-Sidi Rahal": 55,
  "Berrechid-Sidi Smail": 110,
  "Berrechid-Skhirat": 95,
  "Berrechid-Soualem": 35,
  "Berrechid-Temara": 100,
  "Berrechid-Tit Mellil": 43,
  "Berrechid-Youssoufia": 150,
  "Berrechid-Rabat": 97,
  "Berrechid-Sal√©": 100,
  "Berrechid-K√©nitra": 135,
  "Berrechid-T√©mara": 100,
  "Berrechid-Sidi Yahya El Gharb": 165,
  "Berrechid-Sidi Slimane": 175,
  "Berrechid-Sidi Taibi": 145,
  "Berrechid-Tiflet": 160,
  "Berrechid-Ain Atiq": 105,
  "Berrechid-Ain El Aouda": 115,
  "Berrechid-Oulm√®s": 215,
  "Berrechid-Rommani": 145,
  "Berrechid-Sidi kacem": 260,
  "Berrechid-Safi":250,
  "Berrechid-Fes":350,
"Berrechid-B√©ni Mellal": 180,
"Berrechid-Khouribga": 110,
"Berrechid-Kh√©nifra": 230,
"Berrechid-Fquih Ben Salah": 160,
"Berrechid-Oued Zem": 120,
"Berrechid-Boujniba": 110,
"Berrechid-Boulanouare": 120,
"Berrechid-Bejaad": 140,
"Berrechid-Kasba Tadla": 190,
"Berrechid-Souk Sebt Oulad Nemma": 150,
"Berrechid-El Ksiba": 210,
"Berrechid-Zaouiat Cheikh": 200,
  "Had Soualem-Casablanca": 40,
  "Had Soualem-Rabat": 93,
  "Had Soualem-K√©nitra": 140,

  "Benahmed-Casablanca": 75,
  "Benahmed-Rabat": 125,

  "Bouskoura-Casablanca": 27,
  "Bouskoura-Rabat": 100,

  "Marrakech-Casablanca": 250,
  "Marrakech-Rabat": 325,

  "Temara-Rabat": 20,
  "Temara-Casablanca": 96,
  "Temara-K√©nitra": 105
    };

    const startSelect = document.getElementById("startLocation");
    const endSelect = document.getElementById("endLocation");

    villesDepart.forEach(ville => startSelect.add(new Option(ville, ville)));
    villesArrivee.forEach(ville => endSelect.add(new Option(ville, ville)));

    function updateDistanceField() {
      const start = startSelect.value;
      const end = endSelect.value;
      const key = `${start}-${end}`;
      const reverseKey = `${end}-${start}`;
      const distance = distanceData[key] || distanceData[reverseKey] || "";
      document.getElementById("distance").value = distance;
    }

    startSelect.addEventListener("change", updateDistanceField);
    endSelect.addEventListener("change", updateDistanceField);

    document.getElementById("goNoGoForm").addEventListener("submit", function(e) {
      e.preventDefault();

      const gasoilPrice = parseFloat(document.querySelector("[name='gasoilPrice']").value);
      const productWeight = parseFloat(document.querySelector("[name='productWeight']").value);
      const purchasePrice = parseFloat(document.querySelector("[name='purchasePrice']").value);
      const sellingPrice = parseFloat(document.querySelector("[name='sellingPrice']").value);
      const autoroutePrice = parseFloat(document.querySelector("[name='autoroutePrice']").value) || 0;
      const fraisDeplacement = parseFloat(document.querySelector("[name='fraisDeplacement']").value) || 0;
      const fraisChauffeur = parseFloat(document.querySelector("[name='fraisChauffeur']").value) || 0;

      const start = startSelect.value;
      const end = endSelect.value;
      const distance = parseFloat(document.getElementById("distance").value);

      function choisirVehicule(poids) {
        if (poids <= 2000) return { type: 'Pickup', consommation: 0.10 };
        if (poids <= 3000) return { type: 'H100', consommation: 0.13 };
        if (poids <= 3500) return { type: 'Master petite', consommation: 0.12 };
        if (poids <= 4000) return { type: 'Master Renault', consommation: 0.12 };
        if (poids <= 5000) return { type: 'Iveco Fourgon', consommation: 0.15 };
        if (poids <= 7000) return { type: 'Canter', consommation: 0.20 };
        if (poids <= 12000) return { type: 'Solo', consommation: 0.27 };
        if (poids <= 27000) return { type: 'Camion Plateau', consommation: 0.36 };
        if (poids <= 40000) return { type: 'Camion Benne', consommation: 0.42 };
        return null;
      }

      const vehicule = choisirVehicule(productWeight);
      if (!vehicule || !distance) {
        alert("‚ùå Distance non trouv√©e ou v√©hicule non support√©.");
        return;
      }

      const allerRetour = distance * 2;
      const coutCarburant = allerRetour * vehicule.consommation * gasoilPrice;
      const coutAutoroute = autoroutePrice * 2;
      const coutTotal = coutCarburant + coutAutoroute + fraisDeplacement + fraisChauffeur;
      const gain = sellingPrice - purchasePrice;
      const seuil = gain / 4;
      const isGo = coutTotal <= seuil;

      document.getElementById("result").style.display = "block";
      document.getElementById("result").innerHTML = `
        <p><strong>üöó V√©hicule sugg√©r√© :</strong> ${vehicule.type}</p>
        <p><strong>üìç Trajet :</strong> ${start} ‚ûú ${end} ‚ûú ${start}</p>
        <p><strong>‚ÜîÔ∏è Distance aller-retour :</strong> ${allerRetour} km</p>
        <p><strong>‚õΩ Co√ªt carburant :</strong> ${coutCarburant.toFixed(2)} DH</p>
        <p><strong>üõ£Ô∏è Frais autoroute (AR) :</strong> ${coutAutoroute.toFixed(2)} DH</p>
        <p><strong>üßæ Frais d√©placement :</strong> ${fraisDeplacement.toFixed(2)} DH</p>
        <p><strong>üë®‚Äçüîß Frais chauffeur :</strong> ${fraisChauffeur.toFixed(2)} DH</p>
        <p><strong>üí∏ Co√ªt total :</strong> ${coutTotal.toFixed(2)} DH</p>
        <p><strong>üí∞ Gain brut :</strong> ${gain.toFixed(2)} DH</p>
        <p><strong>üìâ Gain net :</strong> ${(gain - coutTotal).toFixed(2)} DH</p>
        <p><strong>üìä Seuil max autoris√© :</strong> ${seuil.toFixed(2)} DH</p>
        <p class="${isGo ? 'go' : 'nogo'}">${isGo ? '‚úÖ GO : Transport rentable' : '‚ùå NO GO : Trop cher'}</p>
      `;
    });
  </script>
</body>
</html>
